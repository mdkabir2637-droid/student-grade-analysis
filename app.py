# -*- coding: utf-8 -*-
"""student_grade_analysis.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1EWyKKbgxKA9l-h2hR_6mqCUJd3uxik_7
"""

!pip install streamlit

import streamlit as st
import matplotlib.pyplot as plt

st.title("Student Grade Analysis Using Python")
st.write("Capstone Project â€“ Data Analytics")

num_students = st.number_input(
    "Enter number of students",
    min_value=1,
    step=1
)

student_names = {}
student_percentages = {}
student_grades = {}

subject_totals = {"Mathematics": 0, "Physics": 0, "Computer Science": 0}
subject_counts = {"Mathematics": 0, "Physics": 0, "Computer Science": 0}

if st.button("Generate Result"):

    for i in range(num_students):
        st.subheader(f"Student {i+1}")

        roll = st.text_input(f"Roll Number {i+1}")
        name = st.text_input(f"Student Name {i+1}")
        student_names[roll] = name

        total = 0
        subjects = ["Mathematics", "Physics", "Computer Science"]

        for sub in subjects:
            marks = st.number_input(
                f"{sub} Marks ({name})",
                min_value=0,
                max_value=100,
                key=f"{sub}{i}"
            )
            total += marks
            subject_totals[sub] += marks
            subject_counts[sub] += 1

        percentage = total / len(subjects)

        if percentage >= 90:
            grade = "A+"
        elif percentage >= 80:
            grade = "A"
        elif percentage >= 70:
            grade = "B"
        elif percentage >= 60:
            grade = "C"
        else:
            grade = "F"

        student_percentages[roll] = percentage
        student_grades[roll] = grade

        st.success(f"Percentage: {percentage:.2f}%")
        st.info(f"Grade: {grade}")

    # ğŸ“Š Student-wise Percentage Graph
    st.subheader("Student-wise Percentage Analysis")
    plt.bar(student_names.values(), student_percentages.values())
    plt.xlabel("Students")
    plt.ylabel("Percentage")
    st.pyplot(plt)

    # ğŸ“Š Subject-wise Average Graph
    st.subheader("Subject-wise Average Marks")
    subject_avg = {
        sub: subject_totals[sub] / subject_counts[sub]
        for sub in subject_totals
    }
    plt.bar(subject_avg.keys(), subject_avg.values())
    plt.xlabel("Subjects")
    plt.ylabel("Average Marks")
    st.pyplot(plt)

    # ğŸ¥§ Grade Distribution Pie Chart
    st.subheader("Grade Distribution")
    grade_count = {}
    for g in student_grades.values():
        grade_count[g] = grade_count.get(g, 0) + 1

    plt.pie(
        grade_count.values(),
        labels=grade_count.keys(),
        autopct="%1.1f%%",
        startangle=90
    )
    st.pyplot(plt)